<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>经典小游戏 - heifengzhaikengwang</title>
    <style>
        /* 原有样式保持不变 */
    </style>
</head>
<body>
    <h1>经典小游戏合集</h1>
    <div id="game-container">
        <div id="ruffle-target"></div>
    </div>

    <!-- 关键修改：配置publicPath -->
    <script>
        window.RufflePlayer = window.RufflePlayer || {};
        window.RufflePlayer.config = {
            // 设置公共路径（根据你的仓库地址）
            publicPath: "/",
            // 强制指定polyfills地址
            polyfills: true,
        };
    </script>
    <script src="ruffle.js"></script>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const ruffle = window.RufflePlayer.newest();
            const player = ruffle.createPlayer();
            const container = document.getElementById("ruffle-target");
            container.appendChild(player);

            // 新增MIME类型检测
            if (!WebAssembly.instantiate) {
                alert("当前浏览器不支持WebAssembly，请使用现代浏览器访问");
                return;
            }

            // 修改加载方式（使用绝对路径）
            player.load("/game.swf").catch((error) => {
                console.error("加载错误详情:", error);
                alert(`游戏加载失败: ${error}`);
            });
        });
    </script>
</body>
</html>
