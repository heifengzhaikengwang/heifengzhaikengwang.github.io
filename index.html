<!DOCTYPE html>
<html>
<head>
    <title>SWF Player</title>
    <!-- 从官方CDN加载最新版Ruffle -->
    <script src="https://unpkg.com/@ruffle-rs/ruffle@latest"></script>
    <style>
        #player-container {
            width: 100vw;
            height: 100vh;
            margin: 0;
            background: #000;
        }
    </style>
</head>
<body>
    <div id="player-container"></div>

    <script>
        window.RufflePlayer = window.RufflePlayer || {};
        window.addEventListener("DOMContentLoaded", () => {
            const player = window.RufflePlayer.newest();
            const ruffle = player.createPlayer();
            const container = document.getElementById("player-container");
            
            // 配置自动适配官方CDN资源
            ruffle.config = {
                publicPath: "https://unpkg.com/@ruffle-rs/ruffle@latest/",
                autoplay: "auto",
                unmuteOverlay: "hidden",
                openInNewTab: false
            };

            container.appendChild(ruffle);
            ruffle.load("game.swf")
                .then(() => {
                    console.log("SWF loaded from Ruffle CDN");
                })
                .catch((e) => {
                    console.error("Error:", e);
                    container.innerHTML = `<p>加载失败，请检查网络连接或<a href="game.swf">下载文件</a></p>`;
                });
        });
    </script>
</body>
</html>
